"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.validateExtensionManifest = void 0;
const constants_1 = require("../constants");
const is_extension_1 = require("./is-extension");
function validateExtensionManifest(extensionManifest) {
    if (!extensionManifest.name || !extensionManifest.version) {
        return false;
    }
    const extensionOptions = extensionManifest[constants_1.EXTENSION_PKG_KEY];
    if (!extensionOptions) {
        return false;
    }
    if (!extensionOptions.type) {
        return false;
    }
    if (!(0, is_extension_1.isExtensionPackage)(extensionOptions.type)) {
        return false;
    }
    if (extensionOptions.type === constants_1.PACK_EXTENSION_TYPE) {
        if (!extensionOptions.host) {
            return false;
        }
    }
    else if ((0, is_extension_1.isHybridExtension)(extensionOptions.type)) {
        if (!extensionOptions.path ||
            !extensionOptions.source ||
            typeof extensionOptions.path === 'string' ||
            typeof extensionOptions.source === 'string' ||
            !extensionOptions.path.app ||
            !extensionOptions.path.api ||
            !extensionOptions.source.app ||
            !extensionOptions.source.api ||
            !extensionOptions.host) {
            return false;
        }
    }
    else {
        if (!extensionOptions.path || !extensionOptions.source || !extensionOptions.host) {
            return false;
        }
    }
    return true;
}
exports.validateExtensionManifest = validateExtensionManifest;
